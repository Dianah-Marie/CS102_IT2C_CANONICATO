---
title: "Activity 3"
author: "Dianah Marie Canonicato"
date: "2024-03-14"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
install.packages("dplyr")
install.packages("rvest")
install.packages("polite")
install.packages("httr")

```{r}
library(dplyr)
library(rvest)
library(polite)
library(httr)
library(selectr)

reviews <- data.frame()


  link <- "https://www.imdb.com/title/tt0903747/reviews?ref_=tt_urv"
  session1 <- bow(link, user_agent = "Educational Purpose")

   scrapeNodes <- function(selector) {
    scrape(session1) %>%
      html_nodes(selector) %>%
      html_text(trim = TRUE)
   }
   
  movieName <- "Planet Earth II (2016)"
  scrapedTitle <- scrapeNodes("a.title")[1:10]
  scrapedReviewer <- scrapeNodes(".display-name-link a")[1:10]
  scrapedReview <- scrapeNodes(".collapsable div.text")[1:10]
  scrapedDate <- scrapeNodes("div.lister-item:nth-of-type(n+2) span.review-date")[1:10]
  scrapedRating <- scrapeNodes("span.rating-other-user-rating")[1:10]

   reviews <- rbind(reviews, data.frame(
    movie_name = rep(movieName, 10),
    title = scrapedTitle,
    reviewer = scrapedReviewer,
    review = scrapedReview,
    date = scrapedDate,
    ratings = scrapedRating
  ))

reviews

```
